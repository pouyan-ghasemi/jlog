<!DOCTYPE html>
<html>
    <head>
        <title>For a faster Clean UP</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Bootstrap -->
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
        <script src="jlog.js" type="text/javascript"></script>
    </head>
    <style>
        body{
            padding: 10px;

        }
        #inline{
            margin-left :30%;
            margin-top: 4%; 
        }
        #copyTheResult{
            margin-left :1%;
            margin-top: 4%;
        }

        #htmlResult{
            margin-top: 3%;
        }

        /* from legacy */
        table{
            direction: ltr;
            unicode-bidi: embed;
            border-top-width: 0px;
            border-right-width: 0px;
            border-bottom-width: 0px;
            border-left-width: 0px;
            border-spacing: 0px;
            width: 100%;
            display: table;
            border-collapse: separate;
            border-spacing: 2px;
            border-color: gray;

        }

        TABLE.data TH {
            background-color: #777;
            text-align: left;
            font-weight: bold;
            color: #fff;
        }

        TABLE.data TD {
            background-color: #f1f1f1;
            color: #000;
            line-height: 1.4em;
            vertical-align: top;
        }


		.documents {
			background-color: #f1f1f1;
			padding: 10px;
			
			border: 1px solid #fff;
		}
    </style>
    <body>
        <h1>Inliner!</h1>
        <!-- Stack the columns on mobile by making one full-width and the other half-width -->
        <div class="row">
            <div class="col-5 col-lg-4 " id="codeHolder">
                <h4>Source<h4>
                <textarea class="form-control" id="htmlSource" rows="12"></textarea>
                <button type="button" class="btn btn-success" id="inline"><i>Inline My Style</i></button>
                <!--<button type="button" class="btn btn-info" id="copyTheResult">I like the Result</button>-->
                <h4>Result<h4>
                <textarea class="form-control" id="htmlResult" rows="12"></textarea>
            </div>
            <div class="col-12 col-lg-8" id="frameHolder">
                <div id="inlineResults"> 

                </div> 
            </div>
        </div>


        <!-- JavaScript plugins (requires jQuery) -->
        <script src="http://code.jquery.com/jquery.js"></script> 
        <!--ZClip copy to clipboard -->
        <script src="http://steamdev.com/zclip/js/jquery.zclip.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="bootstrap/js/bootstrap.min.js"></script>

    </body>

    <script> 
        //jl.lock();
        
        $("#inline").click(function(){ 
            var htmlData = $("#htmlSource").val();
           
            $("#inlineResults").html(htmlData); 
            $("td").removeAttr('width');
            $("th").removeAttr('width'); 
            $("table").removeAttr('width');
            $("table").removeAttr('height'); 
            $("table").css('width', '');
            $("table").css('height', ''); 
             
            distributeStyle( function(){
                $('p').removeClass("box");
                $("#htmlResult").val($("#inlineResults").html());
            });

        });

        distributeStyle = function (clean) {
            var rules = document.styleSheets[document.styleSheets.length-1].cssRules;
            for (var idx = 0, len = rules.length; idx < len; idx++) {
                $(rules[idx].selectorText).each(function (i, elem) {
                    elem.style.cssText = rules[idx].style.cssText + elem.style.cssText;
                });

            }

            clean();
            //$('style').remove();
            //$('script').remove();
        };

        function text(){
            jl.log("outside the loop");
            for( var i = 0 ; i < 10 ; i++)
                jl.log(i);

            jl.stop();

            jl.log("should not be printed");

            jl.start();

            jl.log("Now it is working");

            
        }
        text();
    </script>
</html>
